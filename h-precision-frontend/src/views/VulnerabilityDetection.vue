<template>
  <div class="vulnerability-detection">
    <h2>漏洞检测</h2>
    <el-upload
      action="#"
      multiple
      :on-change="handleFileChange"
      :before-upload="() => false"
      :file-list="fileList"
    >
      <el-button type="primary">选择合约文件</el-button>
    </el-upload>
    <el-button
      type="success"
      :disabled="fileList.length === 0"
      @click="startDetection"
      style="margin-left: 10px"
    >
      开始检测
    </el-button>

    <el-table
      v-if="detectionResults.length > 0"
      :data="detectionResults"
      style="width: 100%; margin-top: 20px"
    >
      <el-table-column prop="fileName" label="合约文件" />
      <el-table-column prop="status" label="检测状态" />
      <el-table-column prop="vulnerabilities" label="检测结果" />
    </el-table>
  </div>
</template>

<script>
export default {
  name: 'VulnerabilityDetection',
  data() {
    return {
      fileList: [],
      detectionResults: [],
    };
  },
  methods: {
    handleFileChange(file, fileList) {
      this.fileList = fileList;
    },
    startDetection() {
      // 模拟检测过程
      this.detectionResults = this.fileList.map((file) => ({
        fileName: file.name,
        status: '已完成',
        vulnerabilities: '无',
      }));
      this.$message.success('检测完成');
    },
  },
};
</script>

<style scoped>
.vulnerability-detection {
  padding: 20px;
}
</style>
